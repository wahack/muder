!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("muder",[],t):"object"==typeof exports?exports.muder=t():e.muder=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(5),o=n(1),i=n(3),a=n(10),s=n(11);describe("example1",function(){it("muder full example",function(){var e=o(a.source,a.mapper,{hello:function(e){return"hello "+e}});r.deepEqual(e,a.result)})}),describe("example2",function(){it("muder full example",function(){var e=o(s.source,s.mapper);r.deepEqual(e,s.result)}),describe("muder functions",function(){it("_dig",function(){var e=i._dig(s.source,s.mapper.workmatesName[0]);r.deepEqual(e,s.result.workmatesName)})})})},function(e,t,n){var r=n(2),o=n(3),i=n(4),a=function(e,t,n){var a={};return r.is.Empty(n)||r.assign(i,n),r.keys(t).forEach(function(n){a[n]=o._map(e,t[n])}),a};e.exports=a},function(e,t){function n(e){if(!u.Object(e)||"function"==typeof e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t}function r(e){var t=[];return n(e).forEach(function(n){t.push(e[n])}),t}function o(e,t){if(Object.assign)return Object.assign(e,t);var r=n(t);return r.forEach(function(n){e[n]=t[n]}),e}function i(e,t){var n=e;for(t=(t||"").split(".");t.length&&n;){var r=t.shift();n=!Object.hasOwnProperty.call(n,r)||u.Array(n)||u.String(n)?void 0:n[r]}return n}function a(e,t){var r={};return n(e).forEach(function(n){r[n]=t(e[n])}),r}function s(e){var t=[];return e.forEach(function(e){u.Array(e)?t=t.concat(s(e)):t.push(e)}),t}var u=function(){var e={};return["Arguments","Function","String","Number","Date","RegExp","Error"].forEach(function(t){e[t]=function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}),e.Array=function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},e.Object=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},e.Empty=function(t){return null===t?!0:e.Array(t)||e.String(t)?0===t.length:0===n(t).length},e}();e.exports={is:u,assign:o,keys:n,values:r,mapValues:a,flattenDeep:s,get:i}},function(e,t,n){var r=n(4),o=n(2);e.exports={_map:function(e,t){var n,r=this;return""===t?e:o.is.Empty(t)&&"function"!=typeof t&&"number"!=typeof t?t:t instanceof Array?(n=[],t.forEach(function(t){"string"==typeof t?n.push(r._map(e,t)):n.push(r._zipObject(o.mapValues(t,function(t){return r._map(e,t)})))}),o.flattenDeep(n)):"object"==typeof t?(n={},o.keys(t).forEach(function(o){n[o]=r._map(e,t[o])}),n):"string"==typeof t?/\[\]/.test(t)?this._dig(e,t):this._channel(e,t):"function"==typeof t?t(e):"number"==typeof t?t:t},_zipObject:function(e){var t,n,r,i,a,s,u=[],c=0;for(n=o.keys(e),r=n.length,t=o.values(e),a=0;a<t.length;a++)c=Math.max(c,"string"!=typeof t[a]&&t[a].length||0);for(a=0;c>a;a++){for(s={},i=0;r>i;i++)s[n[i]]=e[n[i]].shift?e[n[i]].shift()||"":e[n[i]];u.push(s)}return u},_dig:function(e,t){var n,r,o=[],i=this;return n=this._map(e,t.substr(0,t.indexOf("[]"))),r=t.substr(t.indexOf("[]")+3),n.forEach(function(e){o.push(i._map(e,r))}),o},_channel:function(e,t){var n,i;return t?(n=r[t.split("|")[1]],i=2===t.split("|").length?o.get(e,t.split("|")[0]):o.get(e,t),i=void 0===i?"":i,n?n(i):i):e}}},function(e,t){var n={num:function(e){return+e},bool:function(e){return"0"===e||"false"===e?!1:!!e}};e.exports=n},function(e,t,n){function r(e,t){return g.isUndefined(t)?""+t:g.isNumber(t)&&!isFinite(t)?t.toString():g.isFunction(t)||g.isRegExp(t)?t.toString():t}function o(e,t){return g.isString(e)?e.length<t?e:e.slice(0,t):e}function i(e){return o(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+o(JSON.stringify(e.expected,r),128)}function a(e,t,n,r,o){throw new y.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function s(e,t){e||a(e,!0,t,"==",y.ok)}function u(e,t){if(e===t)return!0;if(g.isBuffer(e)&&g.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return g.isDate(e)&&g.isDate(t)?e.getTime()===t.getTime():g.isRegExp(e)&&g.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:g.isObject(e)||g.isObject(t)?l(e,t):e==t}function c(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(g.isNullOrUndefined(e)||g.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(g.isPrimitive(e)||g.isPrimitive(t))return e===t;var n=c(e),r=c(t);if(n&&!r||!n&&r)return!1;if(n)return e=m.call(e),t=m.call(t),u(e,t);var o,i,a=h(e),s=h(t);if(a.length!=s.length)return!1;for(a.sort(),s.sort(),i=a.length-1;i>=0;i--)if(a[i]!=s[i])return!1;for(i=a.length-1;i>=0;i--)if(o=a[i],!u(e[o],t[o]))return!1;return!0}function f(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0:!1}function p(e,t,n,r){var o;g.isString(n)&&(r=n,n=null);try{t()}catch(i){o=i}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&a(o,n,"Missing expected exception"+r),!e&&f(o,n)&&a(o,n,"Got unwanted exception"+r),e&&o&&n&&!f(o,n)||!e&&o)throw o}var g=n(6),m=Array.prototype.slice,d=Object.prototype.hasOwnProperty,y=e.exports=s;y.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var t=e.stackStartFunction||a;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=t.name,s=r.indexOf("\n"+o);if(s>=0){var u=r.indexOf("\n",s+1);r=r.substring(u+1)}this.stack=r}}},g.inherits(y.AssertionError,Error),y.fail=a,y.ok=s,y.equal=function(e,t,n){e!=t&&a(e,t,n,"==",y.equal)},y.notEqual=function(e,t,n){e==t&&a(e,t,n,"!=",y.notEqual)},y.deepEqual=function(e,t,n){u(e,t)||a(e,t,n,"deepEqual",y.deepEqual)},y.notDeepEqual=function(e,t,n){u(e,t)&&a(e,t,n,"notDeepEqual",y.notDeepEqual)},y.strictEqual=function(e,t,n){e!==t&&a(e,t,n,"===",y.strictEqual)},y.notStrictEqual=function(e,t,n){e===t&&a(e,t,n,"!==",y.notStrictEqual)},y["throws"]=function(e,t,n){p.apply(this,[!0].concat(m.call(arguments)))},y.doesNotThrow=function(e,t){p.apply(this,[!1].concat(m.call(arguments)))},y.ifError=function(e){if(e)throw e};var h=Object.keys||function(e){var t=[];for(var n in e)d.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(e,r){function o(e,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&t._extend(r,n),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),u(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,n,r){if(e.customInspect&&n&&N(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return v(o)||(o=u(e,o,r)),o}var i=c(e,n);if(i)return i;var a=Object.keys(n),d=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(N(n)){var y=n.name?": "+n.name:"";return e.stylize("[Function"+y+"]","special")}if(O(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return l(n)}var h="",b=!1,x=["{","}"];if(m(n)&&(b=!0,x=["[","]"]),N(n)){var E=n.name?": "+n.name:"";h=" [Function"+E+"]"}if(O(n)&&(h=" "+RegExp.prototype.toString.call(n)),k(n)&&(h=" "+Date.prototype.toUTCString.call(n)),w(n)&&(h=" "+l(n)),0===a.length&&(!b||0==n.length))return x[0]+h+x[1];if(0>r)return O(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var j;return j=b?f(e,n,r,d,a):a.map(function(t){return p(e,n,r,d,t,b)}),e.seen.pop(),g(j,h,x)}function c(e,t){if(E(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,o){for(var i=[],a=0,s=t.length;s>a;++a)M(t,String(a))?i.push(p(e,t,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(e,t,n,r,o,!0))}),i}function p(e,t,n,r,o,i){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),M(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=y(n)?u(e,c.value,null):u(e,c.value,n-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),E(a)){if(i&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function g(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function m(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function y(e){return null===e}function h(e){return null==e}function b(e){return"number"==typeof e}function v(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function E(e){return void 0===e}function O(e){return j(e)&&"[object RegExp]"===D(e)}function j(e){return"object"==typeof e&&null!==e}function k(e){return j(e)&&"[object Date]"===D(e)}function w(e){return j(e)&&("[object Error]"===D(e)||e instanceof Error)}function N(e){return"function"==typeof e}function S(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function D(e){return Object.prototype.toString.call(e)}function A(e){return 10>e?"0"+e.toString(10):e.toString(10)}function z(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var _=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(e).replace(_,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];i>n;s=r[++n])a+=y(s)||!j(s)?" "+s:" "+o(s);return a},t.deprecate=function(n,o){function i(){if(!a){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),a=!0}return n.apply(this,arguments)}if(E(e.process))return function(){return t.deprecate(n,o).apply(this,arguments)};if(r.noDeprecation===!0)return n;var a=!1;return i};var I,q={};t.debuglog=function(e){if(E(I)&&(I={NODE_ENV:"production"}.NODE_DEBUG||""),e=e.toUpperCase(),!q[e])if(new RegExp("\\b"+e+"\\b","i").test(I)){var n=r.pid;q[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else q[e]=function(){};return q[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=m,t.isBoolean=d,t.isNull=y,t.isNullOrUndefined=h,t.isNumber=b,t.isString=v,t.isSymbol=x,t.isUndefined=E,t.isRegExp=O,t.isObject=j,t.isDate=k,t.isError=w,t.isFunction=N,t.isPrimitive=S,t.isBuffer=n(8);var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",z(),t.format.apply(t,arguments))},t.inherits=n(9),t._extend=function(e,t){if(!t||!j(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(7))},function(e,t){function n(){c=!1,a.length?u=a.concat(u):l=-1,u.length&&r()}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=u.length;t;){for(a=u,u=[];++l<t;)a&&a[l].run();l=-1,t=u.length}a=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var a,s=e.exports={},u=[],c=!1,l=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new o(e,t)),1!==u.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){t.source={studentID:"123",firstName:"liao",lastName:"ethan",sex:"male",age:"23",detailInfo:{classMates:[{studentID:"44",name:"Lisa",sex:"female"},{studentID:"55",name:"Joe",sex:"male"}],tags:["grade-two","good"]}},t.mapper={id:"studentID|num",name:{firstName:"firstName",lastName:"lastName"},sex:"sex",age:"age|num",extra:{classMates:[{id:"detailInfo.classMates[].studentID|num",name:"detailInfo.classMates[].name",sex:"detailInfo.classMates[].sex"}],tags:["detailInfo.tags[]"]},sayHello:"lastName|hello",sayMorning:function(e){return"Morning "+e.lastName+" "+e.firstName},constant:function(){return"this is a constant"},emptyarr:[],emptyObj:{}},t.result={id:123,name:{firstName:"liao",lastName:"ethan"},sex:"male",age:23,extra:{classMates:[{id:44,name:"Lisa",sex:"female"},{id:55,name:"Joe",sex:"male"}],tags:["grade-two","good"]},sayHello:"hello ethan",sayMorning:"Morning ethan liao",constant:"this is a constant",emptyarr:[],emptyObj:{}}},function(e,t){t.source={brokerId:"123",brokerName:"liao",brokerDetail:{from:"china",sex:"male",name:{first:"liao",last:"ethan"},componey:{name:"honhe",address:{code:"518052",locate:"shenzhen"}},tags:["developer","front-end","onepiece-fan"],WorkMates:[{Name:"xiaoyue",Age:25},{Name:"xiaoshan",Age:21},{Name:"xiaolong",Age:28}]},scoreNum:0},t.mapper={test:"test",id:"brokerId|num",name:"brokerName",detail:{first:"brokerDetail.name.last",sex:"brokerDetail.sex",name:"brokerName",location:{code:"brokerDetail.componey.address.code",city:"brokerDetail.componey.address.locate"}},tags:["brokerDetail.tags"],workmatesName:["brokerDetail.WorkMates[].Name"],workmates:[{name:"brokerDetail.WorkMates[].Name",age:"brokerDetail.WorkMates[].Age",id:"brokerId|num"}],isMale:function(e){return"male"===e.brokerDetail.sex},tags2:function(e){return e.brokerDetail.tags},year:2015,extra:function(){return{extra:""}},score:"scoreNum"},t.result={id:123,test:"",name:"liao",detail:{first:"ethan",sex:"male",name:"liao",location:{code:"518052",city:"shenzhen"}},tags:["developer","front-end","onepiece-fan"],workmatesName:["xiaoyue","xiaoshan","xiaolong"],workmates:[{name:"xiaoyue",age:25,id:123},{name:"xiaoshan",age:21,id:123},{name:"xiaolong",age:28,id:123}],isMale:!0,tags2:["developer","front-end","onepiece-fan"],year:2015,extra:{extra:""},score:0}}])});